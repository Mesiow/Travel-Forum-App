<%-include("../partials/header")%>

<div style="margin-top:55px;" class="ui main text container segment">
	<div class="ui huge header"><%= post.title %></div>
	<div class="ui top attached segment">
		<div class="item">
			<img class="ui centered rounded image" src="<%= post.image %>">
			<div class="content">
				<span style="font-weight: bold;"><%= post.created.toDateString() %></span>
			</div>
			<div class="description">
				<p style="padding-bottom:25px; padding-top:10px;"><%= post.body %></p>
			</div>

			<!--reply button-->
			<button id="replyButton" class="ui tiny grey basic button">Reply</button>
			
			<div style="float:right;"id="delete-form">
			<!--delete form-->
			<form action="/topics/<%=post._id%>?_method=DELETE" method="POST">
				<!--edit and delete button-->
				<a style="margin:0;"id="editButton" class="ui tiny orange basic button" href="/topics/<%=post._id%>/edit">Edit</a>
				<button style="margin:0;"id="deleteButton" class="ui tiny red basic button">Delete</button>
			</form>
			</div>
		</div>
	</div>

<!--COMMENTS Section-->
<div class="ui small comments">
  <h3 class="ui dividing header">Comments</h3>
  <!-- post.comments.forEach(function(comment){-->  <!--loop over comments and display-->
  <%post.comments.forEach(function(comment){%>
  <div class="comment">
    <div class="content">
      <a class="author">Matt</a>
      <div class="metadata">
        <span class="date">Today at 5:42PM</span>
      </div>
      <div class="text">
        <%=comment.text%>
      </div>
      <div class="actions">
        <a class="reply">Reply</a>
      </div>
      <!--Add reply form here if reply link has active class-->

    </div>
  </div>
  <%});%>
  <!--put method override because we are putting a comment on the same page-->
  <form class="ui reply form" action="/topics/<%=post._id%>" method="POST">
    <div class="field">
      <textarea name="comment"></textarea>
    </div>
    <button class="ui blue labeled submit icon button">
      <i class="icon edit"></i> Add Comment
    </button>
  </form>
</div>

</div>
<!--Script-->
<script type="text/javascript">
	$(document).ready(function(){
		//fill buttons with their respective color on hover      
		$("#replyButton").hover(function(){$(this).toggleClass("basic");});
		$("#editButton").hover(function(){$(this).toggleClass("basic");});
		$("#deleteButton").hover(function(){$(this).toggleClass("basic");})
	});

</script>

<%-include("../partials/footer")%>